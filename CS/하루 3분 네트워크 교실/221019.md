## Echo와 Time Exceeded

### Echo

#### Destination Unreachable

- 수신처 도달불가능을 통지하는 메시지 설명

#### Echo

타입 0
- 에코 응답(Echo Reply)

타입 8
- 에코 요청(Echo Request)

송신측은 에코 요청을 보내고, 그것을 수신한 컴퓨터는 에코 응답을 돌려 보내는 구조

Echo Request와 Echo Reply

에코 요청을 수신하면, 에코 응답을 보낸다

1. 호스트A에서 호스트B에 Echo Request(에코 요청)을 송신하면···
2. 수신한 호스트B는 송신처(호스트A)에게 Echo Reply(에코 응답)을 보낸다.

#### ping

이 Echo 개념을 이용

임의의 수신처에게 에코 요청을 보내는 소프트웨어

네트워크 관리자의 필수품

에코 요청과 응답을 서로 주고받는 것은 송신처와 수신처 간의 데이터를 송수신할 수 있다는 의미

- ICMP 패킷이 송신처와 수신처 사이를 오고 갈 수 있다는 것
- 만약에 에코 요청을 보냈는데 에코 응답이 돌아오지 않으면 가는 길 또는 돌아오는 길 둘 중에 어딘가 문제가 생겨서 송수신할 수 없다는 것

네트워크 상태를 조사할 수 있다

- 에코의 요청과 응답에 걸리는 시간을 측정

ping이라는 소프트웨어가 조사 가능

- 수신처와의 통신 가능성
- 그 상태

### Time Exceeded

타입11

- Time Exceeded : 시간초과에 의한 패킷 파기

TTL과 관련이 있다

TTL은 끊어진 패킷을 파기하는데 이 때 파기한 것을 통지하는 메시지

TTL이 끝나서 데이터그램이 파기되면 파기된 라우터는 Time Exceed를 송신한다

1. TTL은 라우터를 경유할 때마다 1씩 감소하여 0이 되면
2. 데이터그램은 파기되고 파기한 라우터는 송신처에 Time Exceeded를 보낸다

traceroute

- 이 타입11을 사용한 네트워크의 체크용 소프트웨어

- 수신처까지의 경로를 가르쳐 주는 소프트웨어
- 수신처에 도달하기까지 경유하는 라우터를 가르쳐 줌

1. TTL=1에서 수신처에 패킷을 보내면, 첫번째 라우터에서 Time Exceeded를 보낸다
2. 다음은 TTL=2에서 수신처에 패킷을 보내고, 두번째 라우터에서 Time Exceeded를 보낸다
3. 이후부터 TTL을 1씩 늘려가고 수신처까지 패킷을 전달한다
4. 수신처까지 데이터가 도달해 응답 패킷을 수신하면, 지금까지 Time Exceed를 보내온 라우터를 표시한다. 그것이 수신처까지의 경우 라우터C의 라우터 일람표가 된다

이느 경로를 거쳐 갔는지 알 수 있다

- 의도적으로 에러메시지를 받아 그것을 표로 만들어감

ping : 수신처에 도달했는지 어떤지 확인할 수 있음

traceroute : 도중에 어떤 경로를 통해 갈지를 알아낼 수 있다

라우터 관리자는 ICMP 운용에 주의할 필요가 있음

- 크래커 공격에 이용되기도 함
- traceroute를 통해 IP 주소를 알아낼 수 있음 라우터의IP 주소를 알면 거기를 공격할 수가 있고 라우터가 공격을 받아 이상해지면 네트워크에 광범위하게 영향을 끼치게 됨





