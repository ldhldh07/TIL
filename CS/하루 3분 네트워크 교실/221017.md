## 라우팅

### 라우팅 테이블

라우팅 테이블

- 수신처 네트워크
- 중계지점
- 메트릭
- 수신처의 출구

라우터는 수신처 네트워크를 결정한다

- 매번 어떤 네트워크의 어떤 컴퓨터라는 것까지는 생각하지 않음

- 수신처 네트워크 주소와 라우팅 테이블을 비교해서 경로를 찾아내는 것

### 2개의 라우팅

수신처 네트워크까지의 최적 경로를 어떠게 찾아낼까

- 최적의 경로를 찾기 위해 다른 네트워크 경로를 모두 알아야 할 필요가 있다
- 알고 있는 경로 중에서 최적의 경로를 선택해서 라우팅 테이블을 작성

네트워크의 모든 경로를 알 수 있는 방법

- 정적 라우팅
- 동적 라우팅

#### 정적 라우팅

관리자가 수동으로 경로를 입력하는 것

이 네트워크에는 이 경로를 사용하세요

##### 단점

우회로

수동으로 입력한 경로를 사용할 수 없게 되는 경우가 일어날 수 있다

우회로 변경을 수동으로 수행할 필요가 있다

예) 장애 때문에 라우터X 경우는 네트워크A까지 도달하지 못함

- 정적으로 쓰여진 테이블이 라우터X 경우로 정해져 있기 때문에 라우터X를 경유해서 전송하려고 함
- 우회로인 라우터 Y 경유는 사용되지 않음

- 그 경우 관리자가 수동으로 경로를 다시 갱신할 필요가 있음
- 이 방법으로는 언제 일어날지도 모르는 장애를 대비하기 위해 관리자가 라우터 앞에 붙어 있어야 함

#### 동적 라우팅

자동화

- 라우터가 장애를 발견하면 마음대로 경로를 변경하도록 함

라우터가 자동으로 정보를 서로 교환해서 경로를 알아내는 방법

모든 경로 중에서 자동으로 최적의 경로를 선택해서 라우팅 테이블을 작성

- 장애가 있으면 최적의 경로가 아니니까 새로운 최적경로로 라우팅 테이블을 고쳐 씀

##### 단점

1. 데이터 전송에 사용되는 분량이 줄어듦

   - 라우터끼리 정보를 교환한다는 것은 서로 주고받는 것을 의미

   - 그만큼 회선 전송을 압박

   - 특히 저속회선을 사용하는 경우 주의가 필요

2. 서로 교환한 정보를 가지고 최적의 경로를 계산해야 함

   - 라우터의 처리 능력이 필요

   - 능력이 낮은 라우터의 경우 경로 계산 처리에 치우치다 보면, 데이터그램의 전송처리가 늦어짐

3. 모든 라우터가 동일한 정보를 가져아 함
   - 네트워크의 라우터들이 컨버전스가 되어야 함

##### 컨버전스

모든 라우터가 동일한 정보를 가지고 있는 상태

네트워크 내의 모든 라우터가 올바른 경로 정보를 가지지 않으면 수신처에 정확하게 도달하지 않는다

- 라우터 A는 X로부터 장애정보를 입수했기 때문에  라우터Y 경유로 변환
- 라우터Y는 아직 장애정보를 받지 않았기 때문에 라우터X 경유 상태로 남아있음
- 이 때문에 네트워크 A에는 도달하지 않음

자동으로 장애를 제거할 수 있다는 것은 그만큼 중요

## 라우팅 프로토콜

### 자율화 시스템

#### 라우팅 프로토콜(Rounting Protocol)

근접해 있는 라우터 간의 네트워크 정보를 서로 교환

교환한 정보를 근거로 라우팅 테이블을 변경

#### 자율화 시스템(Autonomous System)

하나의 관리 단체에 의해 관리되는 네트워크 집합체

머리글자를 가져와서 AS라고도 부른다

AS는 한 개의 범위로써 취급

인터넷에는 너무 많은 네트워크가 존재하기 때문에 같은 조직이 관리하는 복수의 네트워크를 AS로 통합해 버림 

복수의 네트워크를 통합해서 큰 단위의 라우팅을 수행한다

- 수신처의 AS에 전달하는 라우팅을 수행하고, AS 내부에서 각 네트워크에 전달하는 라우팅을 수행하는 단계

  - AS 내부에서늬 라우팅

  - AS 간 라우팅

  - AS에는 식별하기 위해 유일한 번호가 부여되어 있다

### 라우팅 프로토콜의 종류

#### AS 간 라우팅용

EGP(Exterior Gateway Protocol)

- BGP라고 불리는 프로토콜이 표준

#### AS 내부 라우팅용

IGP(Interior Gateway Protocol)

- 각각의 AS에서 그곳 관리자가 AS 상태에 맞춰서 프로토콜을 선택함

EGP와 IGP는 프로토콜 이름이 아니라 라우팅 프로토콜의 종류

| 종류 | 라우팅 프로토콜                                    | 동작         |
| ---- | -------------------------------------------------- | ------------ |
| EGP  | EGP (Exterior Gateway Protocol)                    | 디스턴스벡터 |
| EGP  | EGP (Boder Gateway Protocol)                       | 경로벡터     |
| IGP  | RIP (Rounting Information Protocol)                | 디스턴스벡터 |
| IGP  | OSPF (Open Shortest Path First)                    | 링크상태     |
| IGP  | IS-IS (IntermediateSystem to IntermediateSystem)   | 링크상태     |
| IGP  | EIGRP (Enhanced Interior Gateway Routing Protocol) | 하이브리드   |

사용하는 장소에 따라 EGP와 IFO의 두 종류로 나누고, 동작 방식에 따라 네 종류로 나눌 수 있음

### 라우팅 프로토콜의 역할

라우터는 근접해 있는 라우터 간의 네트워크 정보를 서로 교환한다

라우팅 프로토콜이 결정하는 것

- 정보교환을 언제 할지
- 어떻게 할지
- 누구에게 전송할지
- 어떤 정보를 전송할지

모든 라우터가 동일한 경로 정보를 갖는다

1. 라우터는 자신이 접하고 있는 네트워크를 테이블에 유지관리하고 있다.
2. 라우팅 프로토콜을 사용하여 가지고 있는 네트워크의 정보를 서로 교환한다
3. 교환한 정보를 사용하여 라우팅 테이블을 갱신한다

라우팅 프로토콜이 결정한 방식에 따라 정보를 교환해 컨버전스 상태에 도달

컨버전스 

이렇게 교환한 경로 정보를 기준으로 최적의 경로를 라우팅 테이블이 기재

- 항상 최적의 경로가 사용 가능