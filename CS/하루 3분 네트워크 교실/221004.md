## 허브

### 허브의 기능

허브에 케이블로 연결되어 있는 기기는 동일 케이블에 연결되어 있는 것하고 같은 취급

포트 : 허브의 케이블 삽입구

- 포트의 수는 제품에 따라 4, 6, 8, 16, 32개 등이 있음
- 4개의 포트가 있는 허브라면 4대의 기기를 연결할 수 있음

허브를 중심으로 해서 컴퓨터가 연결되어 있는 것 같은 느낌

 #### 신호의 증폭과 재생

감쇠에 의해 붕괴된 신호를 본래의 형태로 증폭 · 재생

리피터

- 증폭만 하는 기계
- 케이블 사이에 연결하는 기계
- 허브처럼 케이블을 많이 연결할 수는 없음

케이블을 많이 연결할 수 있는 허브 쪽이 일반벅으로 사용

신호가 증폭되어 멀리까지 신호가 닿을 수 있음

#### 복수의 기기를 연결해서 네트워크를 구축

허브에 연결되어 있는 기기끼리 신호를 주고받을 수 있음

- 허브에 케이블을 연결해서 하나의 케이블에 연결되어 있는 것과 동일한 취급

연속 접속

- 허브에 있는 포트 수보다 많은 컴퓨터가 있으면 허브와 허브를 연결하는 접속

- 허브에 연결함으로써 케이블 한 개에 연결되는 것과 같은 취급을 하게 되니까 거기에 다시 허브를 연결하면 그것도 같은 케이블로 연결되는 것이 됨

허브를 연속 접속하면 큰 네트워크를 만들 수 있게 됨

허브끼리 접속함으로써 신호가 도달하는 범위를 넓힐 수 있다

### 충돌 도메인

허브는 수신한 신호에 대해 어떤 제어도 하지 않음

- 신호를 증폭하고 재생은 하지만 그 외에는 안한다

플러딩

- 허브는 수신한 포트 이외에 모든 포트에 수신한 신호를 송신

허브에 연결되어 있는 기기가 신호를 보내면 충돌이 일어날 가능성이 있음

- 충돌: 신호가 전송되는 도중에 별도의 신호를 보냄으로써 신호가 부딪혀서 읽을 수 없게 되는 것

충돌 도메인

- 신호를 송신하면 충돌이 발생할지도 모르는 범위
- 충돌 도메인 내에 있는 컴퓨터가 신호를 송신하면 어딘가에서 충돌이 발생
- 허브로 연결되어 있는 컴퓨터는 같은 충돌 도메인에 있게 되는 것

충돌 도메인은 작아야 한다

- 충돌이 발생하면 신호가 섞여서 이상해지거나 수신측에서 제대로 읽을 수 없게 됨

- 충돌 도메인 내에 컴퓨터가 많으면 우연히 같은 타이밍으로 신호를 보낼 가능성이 높아지고 충돌 가능성도 높아짐

충돌 도메인의 범위가 작다는 것은 충돌 도메인 내의 컴퓨터 수가 적다

스위치의 역할

## 2계층의 역할과 개요

### 2계층의 개요

여러 개의 컴퓨터가 허브에 연결되어 있는 경우 누구에게든 상관없이 도달하게 되버림

1대에만 도달하도록 하는 방법 생각해야 함

송신하는 타이밍을 엇갈리게 해야 함

신호의 송신 전이나 수신 후에 바르게 데이터를 송수힌하는 순서가 필요

- 충돌을 막기 위해 송신하는 타이밍을 엇갈리게 하는 방법은 신호를 보내기 전
- 신호가 도달한 후에도 생각해야 할 것이 있음

2계층 : 신호가 닿는 범위에서의 데이터 전송에 관한 규정

- 신호가 닿는 범위
  - 멀티엑세스 네트워크 : 허브로 연결되어 있는 기기 전체
  - 포인트 투 포인트 네트워크 : 서로 연결되어 있는 두 대\
    - 컴퓨터와 라우터, 라우터와 라우터 사이
  - 세그먼트 범위에서의 데이터 전송

세그먼트를 넘는 데이터 전송

- 패킷 교환기인 라우터를 통해서 별도의 세그먼트로 데이터를 보낸다
- 3계층에서 다룸

### 프레이밍과 신호의 동기

1계층에서 다루는 신호랑 케이블 등에 따라 2계층의 규격이 달라지게 되는 것

2계층에서는 1계층에서 사용되고 있는 케이블이나 신호에 따라 사용하는 규칙이 다름

- LAN용
- WAN용

3계층 이상에서는 LAN이나 WAN이나 동일한 규칙 사용

이더넷(Ethernet)

- LAN의 사실표준

#### 프레이밍

2계층에서는 세그먼트 내에서의 데이터 전송에 관한 순서가 정해져 있음

1계층에서 주고받는 신호를 비트화해 거기에 의미를 갖게 하는 것

프레임 : 2계층의 PDU

프레이밍을 시행함으로써 송수신되는 신호를 데이터로 인식할 수 있게 됨

송수신되는 비트열에 의미를 주어 데이터로 취급할 수 있게 한다

- 비트열
- 프레임 포맷 : 프리엠블 8비트 어드레스 16비트
- 프레임 포맷을 비트열에 적용시킴으로써 송수신되는 비트에 의미가 생긴다
  - = 프레임화 한다

#### 프리엠블

- 지금부터 프레임이 시작된다는 신호
- 수신측에서 프리엠블을 수신하면 이제부터 프레임 신호가 오겠군 하고 판단
- 비트를 신호화할때 1비트분의 신호의 폭을 정함
- 이것을 제대로 다루기 위해서는 비트를 읽는 타이밍이 송신측과 수신측 양측에서 일치해야 함

동기 통신

- 데이터를 송수신하지 않는 상태에서도 클락(Clock)신호라고 하는 타이밍을 맞추는 신호를 계속해서 보내는 방법
- 프리엠블 사용하지 않음
- 항상 신호를 보내는 수고가 필요하기 때문에 별로 사용되지 않음

프리엠블에 맞춰서 비트를 읽는 타이밍을 정함

패킷 교환 방식에서는 프리엠블 방식이 일반적

## 2계층 주소와 이더넷

### 주소와 캐스트

이더넷에서 어떻게 '신호가 도달하는 범위에서 데이터를 송수힌하는지'

- 주소(Address)
- 어드레싱(Addressing)

#### 주소

데이터를 보내는 상대와 자신을 특정하는 데이터

- 데이터 통신은 데이터를 보내고 상대방에게서도 데이터가 오는 것이 일반적
- 이쪽 주소도 가르쳐 줄 필요가 있음
- 수신처와 송신처의 주소를 알려줌

데이터 전송 방법에 따라 3종류가 있음

- 유니캐스트(Unicast)
  - 유니캐스트 주소 : 특정한 1대를 지정하는 주소
- 브로드캐스트(Broadcast)
  - 브로드캐스트 주소 : 전체를 수신자로 사용하는 주소
- 멀티캐스트(Multicast)
  - 멀티캐스트 주소 : 수신처 그룹을 나타내는 주소

유니캐스트

- 1대1 데이터 통신

- 가장 일반적

브로드캐스트

- 1대 전체
- 전원, 즉 모두에게 메시지를 보내는 데이터 통신
- 2계층의 브로드캐스트는 세그먼트 내의 모든 기기

멀티캐스트

- 1대 다수

- 지정된 복수의 기기로 메시지를 보냄

### MAC 주소

각각의 기기는 유니캐스트 주소를 적어도 한 개 갖고 있음

이를 수신처로 해서 다른 기기는 그 기기에 데이터를 송신

라우터

- 복수의 인터페이스를 가짐
- 인터페이스마다 유니캐스트 주소를 가짐

유니캐스트 주소는 유일해야 함

- 같은 것이 없다는 뜻
- 같은 유니캐스트 주소를 가진 기기가 여러 개 있는 경우에는 수신처를 특정지을 수 없음

멀티캐스트 주소는 같은 주소를 가진 기기가 여러 개 있어도 됨

- 그룹 번호 취급
- 수신처를 그룹으로 하면 그 그룹에 속한 기기가 수신

- 멀티캐스트 그룹에 속해 있는 기기는 '유니캐스트 주소'와  '멀티캐스트 주소' 2개를 갖게 됨

브로드캐스트 주소

- 전체 수신이 됨
- 이 주소로 보낸 데이터는 모든 기기가 무조건 송신을 해야 함

MAC 주소(Media Access Control Address)

- 이더넷에서 사용되는 주소

- 인터페이스에 지정된 고정 주소
  - 인터페이스가 변하면 주소가 변함

48비트 값으로 4비트마다 16진수로 고쳐서 씀

16진수

- 0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,F

선두 24비트

- 벤더코드라고 불리는 인터페이스를 제조한 메이커의 번호

후반 24비트

- 제조한 메이커가 붙이 번호(벤더 할당 코드)

어느 메이커가 만든 + 몇 번째 인터페이스

수신처를 유일하게 특정할 수 있는 것

## 이더넷

### 이더넷 프레임

이더넷에서는 이더넷 헤더와 이더넷 트레일러를 데이터그램에 붙여서 이더넷 프레임으로 캡슐화

이 이더넷 프레임이 신호가 돼서 케이블로 전달

이더넷에서 사용하는 2계층 PDU

#### 이더넷 프레임(최소 64바이트 ~ 최대 1,518바이트)

##### 이더넷 헤더 (14바이트)

수신처 MAC 주소 (48비트)

송신처 MAC 주소 (48비트)

타입 (16비트)

- 페이로드에서 전송하는 데이터 (3계층 PDU)의 종류를 특정하는 값
- IP데이터그램이라면 16진수로 0080이 들어간다

##### 페이로드 (368~12,000비트)

이더넷 헤더와 트레일러에 의해 캡슐화되는 3계층 PDU(전송되는 데이터)

##### 이더넷 트레일러 (4바이트)

FCS(Frame Check Sequence, 32비트)

- 에러 체크용 비트열
- 신호가 전송되는 동안에 문제가 생겨서 정확하게 읽을 수 없게 되거나 0을 1로 또는 그 반대로 읽어버리는 경우가 있다
- 그런 에러를 체크하기 위해 FCS를 붙임

- 통신 도중에 에러를 고칠 수는 없다
  - 허밍부호라고 하는 에러 체크 코드를 붙이면 고칠수 있다
  - 하지만 복수의 비트가 에러인 경우에는 허밍부호로도 불가능해진다

- 에러가 발생했는지 아닌지는 알지만 어느 상태가 올바른 상태인지까지는 모름
- 에러가 있었던 프레임은 파기

### 이더넷 동작

허브를 사용한 경우 신호의 문제

- 플러딩에 의해 허브에 연결되어 있는 모든 기기에 신호가 발생
- 충돌이 발생한다

#### 해결 - 플러딩에 의해 허브에 연결되어 있는 모든 기기에 신호가 발생

수신한 프레임 수신처 MAC 주소를 보고 자기에게 온 것 이외의 다른 프레임을 파기

멀티캐스트의 경우

- 멀티캐스트 주소에 그룹의 번호가 들어있으니까 자신이 그 그룹의 일원이라면 수신, 그 이외의 경우는 파기

브로드캐스트의 경우

- 전체 수신이니까 반드시 수신

#### 해결 - 충돌이 발생한다

엑세스 제어

- 인터페이스에 연결되어 있는 케이블에 신호를 보내느 엑세스를 제어하는 것

CSMA/CD(Carrier Sense Multiple Access/Collison Detection)

- 신호를 보내는 타이밍을 겹치지 않도록 비켜나게 함으로써 되도록 충돌이 일어나지 않도록 함
- CS(신호감지) : 누군가가 송신중이라면 송신하지 않는다
- MA(다중 엑세스): 아무도 송신하고 있지 않다면 송신할 수 있다
- CD(충돌 검사): 송신 후에 충돌이 일어나면 다시 재수행한다
  - 거의 동시에 신호를 감지한 경우 2대가 송신하게 됨
  - 신호감지(CS)로도 막을 수 없음허브와 스위치