# 커넥션과 포트 번호

## 4계층의 역할과 개요

### 4계층의 역할

4계층 이상의 상위 계층에서는 전달할 · 전달된 데이터에 대해 필요한 처리를 한다

- 수신처 컴퓨터에 데이터를 보내는 것이 1계층부터 3계층의 역할
- 4계층 이상의 상위 계층에서는 데이터를 운반하는 직접적인 동작은 하지 않는다

#### 에러 복구

4계층의 경우 신뢰성이 높은(에러가 적은) 데이터 전송을 하기 위한 처리를 한다

3계층까지는 수신처 자체가 존재하지 않거나 데이터가 도중에 손실됐거나 에러에 의해 파기했다는 등의 문제들은 신경 쓰지 않는다

데이터가 도달하지 않았거나 돋ㄹ해도 망가져 있는 경우가 생김

도달하지 않은 경우에 다시 보냄으로써 에러를 없었던 것으로 한다

1. 데이터를 수신하면, 송신처에게 수신한 것을 통지한다(확인응답).
2. 그렇게 함으로써 송신처는 수신처가 데이터를 받은 것을 확인할 수 있다

#### 흐름 제어

신뢰성이 높은 통신을 위해서 에러를 복구하고 통신 상태도 확인

##### 오퍼 플로(Over Flow)

- 처리할 수 없는 데이터가 넘쳐 흐르는 것
- 처리 능력을 넘어선 정보를 받았을 때, 그것을 다 처리할 수 없어서 파기해 버리는 경우가 있음

이 오버플로를 막아 주기 때문에 '흐름 제어'라고 부른다

도달했을 때, 대기장소에 데이터가 넘치는 것(플로)를 방지한다

1. 수신처에 데이터를 보내면, 수신처는 데이터를 받아서 그것을 일시적으로 모아둔다 그리고 준비되는 대로 처리한다
2. 처리가 늦어지거나 송신 속도나 간격이 빠른 경우 데이터가 점점 쌓이기 때문에 결국에는 모아둘 수가 없게 되어 파기해버린다. 이것을 오버플로라고 부른다

3. 그것을 방지하기 위해 수신측은 확인응답 때에 모아둘 수 있는 데이터 양을 송신처에게 통지하여, 송신량을 가감하게 하거나 송신을 일시적으로 중지하게 한다.

### 애플리케이션 식별

한 대의 컴퓨터에서 전자메일과 홈페이지 열람을 동시에 했을 경우

- 같은 컴퓨터에 도달하며 구분해야 함

데이터를 주고 받는 것은 애플리케이션

애플리케이션

- 통신에서 데이터를 주고받는 컴퓨터 소프트웨어

#### 포트 번호(Port Number)

어느 애플리케이션이 송신한 데이터인지 어느 애플리케이션이 수신한 데이터인지 결정하기 위해 부여된다

어느 애프리케이션이 송수신할지를 결정하는 번호

- 애플리케이션은(내부적으로) 포트에 의해 통신기능과 접속되어 있다.
- 그 포트에 부여된 번호를 사용하여 어느 애플리케이션이 수신처인지를 판별한다

데이터를 넣고 꺼내는 가상의 출입구

각 애플리케이션에는 이것이 장치되어 있어 거기에 데이터를 보낸다

컴퓨터까지 도달한 데이터는 이 포트 번호를 근거로 그 데이터가 사용될 애플리케이션에 전해지게 됨

### TCP와 UDP

4계층에서 이러한 통신에 필요한 처리를 하는데, TCP/IP에서 실제로 이런 제어를 행하는 두 프로토콜

- TCP(Transmission Contol Protocol)
- UDP(User Datagram Protocol)

통신할 때 둘 중 어느 한 쪽이 사용된다

- TCP와 UDP는 역할이 다름

- 장점과 단점이 동전의 양면과 같은 관계
- 송신할 데이터의 내용이나 상황에 따라 어느 한쪽을 사용한다

